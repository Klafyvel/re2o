{% extends "preferences/sidebar.html" %}
{% comment %}
Re2o est un logiciel d'administration développé initiallement au rezometz. Il
se veut agnostique au réseau considéré, de manière à être installable en
quelques clics.

Copyright © 2017  Gabriel Détraz
Copyright © 2017  Goulven Kermarec
Copyright © 2017  Augustin Lemesle

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License along
with this program; if not, write to the Free Software Foundation, Inc.,
51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
{% endcomment %}

{% load bootstrap3 %}
{% load acl %}

{% block title %}Création et modification des préférences{% endblock %}

{% block content %}
    <h4>Préférences utilisateur</h4>
        <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:edit-options' 'OptionalUser' %}">
        <i class="fa fa-edit"></i>
            Editer
    </a>
    <p>
    </p>
    <h5>Généralités</h5>
    <table class="table table-striped">
        <tr>
            <th>Téléphone obligatoirement requis</th>
            <td>{{ useroptions.is_tel_mandatory }}</td>
	    <th>Auto inscription</th>
            <td>{{ useroptions.self_adhesion }}</td>
        </tr>
        <tr>
            <th>Champ gpg fingerprint</th>
            <td>{{ useroptions.gpg_fingerprint }}</td>
 	    <th>Shell par défaut des utilisateurs</th>
            <td>{{ useroptions.shell_default }}</td>
        </tr>
        <tr>
            <th>Champ gpg fingerprint</th>
            <td>{{ useroptions.gpg_fingerprint }}</td>
        </tr>
        <tr>
            <th>Creations d'adhérents par tous</th>
            <td>{{ useroptions.all_can_create_adherent }}</td>
	    <th>Creations de clubs par tous</th>
	    <td>{{ useroptions.all_can_create_club }}</td>
        </tr>
    </table>

    <h5>{% if useroptions.mail_accounts %}<span class="label label-success">Comptes mails{% else %}<span class="label label-danger">Comptes mails{% endif%}</span></h5>
    <table class="table table-striped">
	<tr>
		<th>Gestion des comptes mails</th>
		<td>{{ useroptions.mail_accounts }}</td>
		<th>Extension mail interne</th>
		<td>{{ useroptions.mail_extension }}</td>
	</tr>
	<tr>
		<th>Nombre d'alias maximum</th>
		<td>{{ useroption.max_mail_alias }}<td>
	</tr>
    </table>

    <h4>Préférences machines</h4>
        <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:edit-options' 'OptionalMachine' %}">
            <i class="fa fa-edit"></i>
            Editer
        </a>
    <p>
    </p>
     <table class="table table-striped">
        {% for line in machineoptions %}
	<tr>
	{% for text, field in line %}
            <th>{{ field }}</th>
            <td>{{ text }}</td>
	{% endfor %}
	</tr>
        {% endfor %}

    </table>
    <h4>Préférences topologie</h4>
        <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:edit-options' 'OptionalTopologie' %}">
            <i class="fa fa-edit"></i>
            Editer
        </a>
    <p>
    </p>
    <h5>Préférences authentification radius</h5>
    <table class="table table-striped">
	<tr>
            <th>Politique par defaut de placement de vlan avec radius</th>
            <td>{{ topologieoptions.radius_general_policy }}</td>
	    <th>Placement sur ce vlan par default en cas d'accès OK</th>
	    <td>{{ topologieoptions.vlan_decision_ok }}</td>
        </tr>
	<tr>	
	    <th>Placement sur ce vlan par default en cas de rejet</th>
	    <td>{{ topologieoptions.vlan_decision_nok }}</td>
	</tr>
    </table>

	<h6>Clef radius</h6>
	  {% can_create RadiusKey%}
	  <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:add-radiuskey'  %}"><i class="fa fa-plus"></i> Ajouter une clef radius</a>
	  {% acl_end %}
	  {%  include "preferences/aff_radiuskey.html" with  radiuskey_list=radiuskey_list %}

    <h4>Configuration des switches</h4>
    <table class="table table-striped">
	<tr>
            <th>Web management, activé si provision automatique</th>
            <td>{{ topologieoptions.switchs_web_management }}</td>
	    <th>Rest management, activé si provision auto</th>
	    <td>{{ topologieoptions.switchs_rest_management }}</td>
        </tr>
    </table>



    <h5>{% if topologieoptions.provision_switchs_enabled %}<span class="label label-success">Provision de la config des switchs{% else %}<span class="label label-danger">Provision de la config des switchs{% endif%}</span></h5>
    <table class="table table-striped">
	<tr>
	    <th>Switchs configurés automatiquement</th>
	    <td>{{ topologieoptions.provisioned_switchs|join:", "  }} {% if topologieoptions.provisioned_switchs %}<span class="label label-success"> OK{% else %}<span class="label label-danger">Manquant{% endif %}</span></td>
	</tr>
	<tr>	
	    <th>Plage d'ip de management des switchs</th>
	    <td>{{ topologieoptions.switchs_ip_type }} {% if topologieoptions.switchs_ip_type %}<span class="label label-success"> OK{% else %}<span class="label label-danger">Manquant{% endif %}</span></td>
	</tr>
	<tr>	
            <th>Serveur des config des switchs</th>
	    <td>{{ topologieoptions.switchs_management_interface }} {% if topologieoptions.switchs_management_interface %} - {{ topologieoptions.switchs_management_interface_ip }}  <span class="label label-success"> OK{% else %}<span class="label label-danger">Manquant{% endif %}</span></td>
	</tr>
        <tr>
	    <th>Mode de provision des switchs</th>
            <td>{{ topologieoptions.switchs_provision }}</td>
	</tr>
	<tr>
	    <th>Mode TFTP</th>
	    <td><span class="label label-success"> OK</span></td>
	</tr>
	<tr>
	    <th>Mode SFTP</th>
	    <td>{% if topologieoptions.switchs_management_sftp_creds %}<span class="label label-success"> OK{% else %}<span class="label label-danger">Creds manquants{% endif %}</span></td>
	</tr>
    </table>

       <h6>Creds de management des switchs</h6>
	  {% can_create SwitchManagementCred%}
	  <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:add-switchmanagementcred'  %}"><i class="fa fa-plus"></i> Ajouter un id/mdp de management switch</a>
	  {% acl_end %}
          <p>
          </p>
          {% if switchmanagementcred_list %}<span class="label label-success"> OK{% else %}<span class="label label-danger">Manquant{% endif %}</span>
          {%  include "preferences/aff_switchmanagementcred.html" with  switchmanagementcred_list=switchmanagementcred_list %}



    <h4>Préférences generales</h4>
        <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:edit-options' 'GeneralOption' %}">
            <i class="fa fa-edit"></i>
            Editer
        </a>
    <p>
    </p>
    <table class="table table-striped">
        {% for line in generaloptions %}
	<tr>
	{% for text, field in line %}
            <th>{{ field }}</th>
            <td>{{ text }}</td>
	{% endfor %}
	</tr>
        {% endfor %}

    </table>

    <h4>Données de l'association</h4>
        <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:edit-options' 'AssoOption' %}">
            <i class="fa fa-edit"></i>
            Editer
        </a>
    <p>
    </p>
    <table class="table table-striped">
        {% for line in assooptions %}
	<tr>
	{% for text, field in line %}
            <th>{{ field }}</th>
            <td>{{ text }}</td>
	{% endfor %}
	</tr>
        {% endfor %}

    </table>

    <h4>Messages personalisés dans les mails</h4>
        <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:edit-options' 'MailMessageOption' %}">
            <i class="fa fa-edit"></i>
            Editer
        </a>
    <p>
    </p>
    
    <table class="table table-striped">
        {% for line in mailmessageoptions %}
	<tr>
	{% for text, field in line %}
            <th>{{ field }}</th>
            <td>{{ text }}</td>
	{% endfor %}
	</tr>
        {% endfor %}

    </table>


  <h2>Liste des services et préférences page d'accueil</h2>
  {% can_create preferences.Service%}
  <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:add-service'  %}"><i class="fa fa-plus"></i> Ajouter un service</a>
  {% acl_end %}
  {%  include "preferences/aff_service.html" with  service_list=service_list %}

    <h4>Réseaux sociaux page d'accueil</h4>

        <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:edit-options' 'HomeOption' %}">
            <i class="fa fa-edit"></i>
            Editer
        </a>
    <p>

    <table class="table table-striped">
        {% for line in homeoptions %}
	<tr>
	{% for text, field in line %}
            <th>{{ field }}</th>
            <td>{{ text }}</td>
	{% endfor %}
	</tr>
        {% endfor %}
    </table>

  <h2>Liste des adresses mail de contact</h2>
  {% can_create preferences.MailContact%}
  <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:add-mailcontact'  %}"><i class="fa fa-plus"></i>Ajouter une adresse</a>
  {% acl_end %}
  <a class="btn btn-danger btn-sm" role="button" href="{% url 'preferences:del-mailcontact'  %}"><i class="fa fa-trash"></i>Supprimer une ou plusieurs adresses</a>
  {%  include "preferences/aff_mailcontact.html" with  mailcontact_list=mailcontact_list %}

<h2>Options pour le mail de fin d'adhésion</h2>
  {% can_create preferences.Reminder%}
  <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:add-reminder'  %}"><i class="fa fa-plus"></i> Ajouter un rappel</a>
  {% acl_end %}
  {%  include "preferences/aff_reminder.html" with  reminder_list=reminder_list %}

  <br />
  <br />
  <br />
{% endblock %}
