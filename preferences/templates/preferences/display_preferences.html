{% extends "preferences/sidebar.html" %}
{% comment %}
Re2o est un logiciel d'administration développé initiallement au rezometz. Il
se veut agnostique au réseau considéré, de manière à être installable en
quelques clics.

Copyright © 2017  Gabriel Détraz
Copyright © 2017  Goulven Kermarec
Copyright © 2017  Augustin Lemesle

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License along
with this program; if not, write to the Free Software Foundation, Inc.,
51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
{% endcomment %}

{% load bootstrap3 %}
{% load acl %}

{% block title %}Création et modification des préférences{% endblock %}

{% block content %}
    <h4>Préférences utilisateur</h4>
        <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:edit-options' 'OptionalUser' %}">
	    <i class="glyphicon glyphicon-edit"></i>
            Editer
	</a>
    <p>
    </p>
    <table class="table table-striped">
        <tr>
            <th>Téléphone obligatoirement requis</th>
            <td>{{ useroptions.is_tel_mandatory }}</td>
            <th>Activation du solde pour les utilisateurs</th>
            <td>{{ useroptions.user_solde }}</td>
        </tr>
        <tr>
            <th>Champ gpg fingerprint</th>
            <td>{{ useroptions.gpg_fingerprint }}</td>
	    {% if useroptions.user_solde %}
	    <th>Solde négatif</th>
	    <td>{{ useroptions.solde_negatif }}</td>
	    {% endif %}
        </tr>
        <tr>
            <th>Creations d'users par tous</th>
            <td>{{ useroptions.all_can_create }}</td>
        {% if useroptions.user_solde %}
        <th>Rechargement max</th>
        <td>{{ useroptions.max_recharge }}</td>
        {% endif %}
        </tr>
    </table>
    <h4>Préférences machines</h4>
        <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:edit-options' 'OptionalMachine' %}">
            <i class="glyphicon glyphicon-edit"></i>
            Editer
        </a>
    <p>
    </p>
    <table class="table table-striped">
        <tr>
            <th>Mot de passe par machine</th>
            <td>{{ machineoptions.password_machine }}</td>
            <th>Machines/interfaces autorisées par utilisateurs</th>
            <td>{{ machineoptions.max_lambdauser_interfaces }}</td>
        </tr>
        <tr>
            <th>Alias dns autorisé par utilisateur</th>
            <td>{{ machineoptions.max_lambdauser_aliases }}</td>
            <th>Support de l'ipv6</th>
            <td>{{ machineoptions.ipv6 }}</td>
     	</tr>
    </table>
    <h4>Préférences topologie</h4>
        <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:edit-options' 'OptionalTopologie' %}">
            <i class="glyphicon glyphicon-edit"></i>
            Editer
        </a>
    <p>
    </p>
    <table class="table table-striped">
        <tr>
            <th>Politique générale de placement de vlan</th>
            <td>{{ topologieoptions.radius_general_policy }}</td>
	    <th> Ce réglage défini la politique vlan après acceptation radius : soit sur le vlan de la plage d'ip de la machine, soit sur un vlan prédéfini dans "Vlan où placer les machines après acceptation RADIUS"</th>
            <td></td>
        </tr>
        <tr>
            <th>Vlan où placer les machines après acceptation RADIUS</th>
            <td>{{ topologieoptions.vlan_decision_ok }}</td>
            <th>Vlan où placer les machines après rejet RADIUS</th>
            <td>{{ topologieoptions.vlan_decision_nok }}</td>
        </tr>
    </table>
    <h4>Préférences generales</h4>
        <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:edit-options' 'GeneralOption' %}">
            <i class="glyphicon glyphicon-edit"></i>
            Editer
        </a>
    <p>
    </p>
    <table class="table table-striped">
        <tr>
            <th>Nom du site web</th>
            <td>{{ generaloptions.site_name }}</td>
            <th>Adresse mail d'expedition automatique</th>
            <td>{{ generaloptions.email_from }}</td>
        </tr>
        <tr>
            <th>Affichage de résultats dans le champ de recherche</th>
            <td>{{ generaloptions.search_display_page }}</td>
            <th>Nombre d'items affichés en liste (taille normale)</th>
            <td>{{ generaloptions.pagination_number }}</td>
        </tr>
        <tr>
            <th>Nombre d'items affichés en liste (taille élevée)</th>
            <td>{{ generaloptions.pagination_large_number }}</td>
            <th>Temps avant expiration du lien de reinitialisation de mot de passe (en heures)</th>
            <td>{{ generaloptions.req_expire_hrs }}</td>
        </tr>
	<tr>
            <th>Message global affiché sur le site</th>
            <td>{{ generaloptions.general_message }}</td>
	<tr>
    </table>
    <h4>Données de l'association</h4>
        <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:edit-options' 'AssoOption' %}">
            <i class="glyphicon glyphicon-edit"></i>
            Editer
        </a>
    <p>
    </p>
    <table class="table table-striped">
        <tr>
            <th>Nom</th>
            <td>{{ assooptions.name }}</td>
            <th>SIRET</th>
            <td>{{ assooptions.siret }}</td>
        </tr>
        <tr>
            <th>Adresse</th>
	    <td>{{ assooptions.adresse1  }}<br>
		{{ assooptions.adresse2 }}</td>
            <th>Contact mail</th>
            <td>{{ assooptions.contact }}</td>
        </tr>
        <tr>
            <th>Telephone</th>
            <td>{{ assooptions.telephone }}</td>
            <th>Pseudo d'usage</th>
            <td>{{ assooptions.pseudo }}</td>
        </tr>
        <tr>
            <th>Objet utilisateur de l'association</th>
            <td>{{ assooptions.utilisateur_asso }}</td>
            <th>Moyen de paiement automatique</th>
            <td>{{ assooptions.payment }}</td>
        </tr>

    </table>
    <h4>Messages personalisé dans les mails</h4>
        <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:edit-options' 'MailMessageOption' %}">
            <i class="glyphicon glyphicon-edit"></i>
            Editer
        </a>
    <p>
    </p>
    <table class="table table-striped">
        <tr>
            <th>Mail de bienvenue (Français)</th>
            <td>{{ mailmessageoptions.welcome_mail_fr | safe }}</td>
	</tr>
        <tr>
            <th>Mail de bienvenue (Anglais)</th>
            <td>{{ mailmessageoptions.welcome_mail_en | safe }}</td>
        </tr>
    </table>
  <h2>Liste des services page d'accueil</h2>
  {% can_create preferences.Service%}
  <a class="btn btn-primary btn-sm" role="button" href="{% url 'preferences:add-service'  %}"><i class="glyphicon glyphicon-plus"></i> Ajouter un service</a>
  {% acl_end %}
  <a class="btn btn-danger btn-sm" role="button" href="{% url 'preferences:del-services'  %}"><i class="glyphicon glyphicon-trash"></i> Supprimer un ou plusieurs service</a>
  {%  include "preferences/aff_service.html" with  service_list=service_list %}
  <br />
  <br />
  <br />
{% endblock %}
