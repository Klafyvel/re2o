{% extends "machines/sidebar.html" %}
{% comment %}
Re2o est un logiciel d'administration développé initiallement au rezometz. Il
se veut agnostique au réseau considéré, de manière à être installable en
quelques clics.

Copyright © 2017  Gabriel Détraz
Copyright © 2017  Goulven Kermarec
Copyright © 2017  Augustin Lemesle
Copyright © 2017  Maël Kervella

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License along
with this program; if not, write to the Free Software Foundation, Inc.,
51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
{% endcomment %}

{% load bootstrap3 %}
{% load bootstrap_form_typeahead %}

{% block title %}Création et modification de machines{% endblock %}

{% block content %}
{% if machineform %}
{% bootstrap_form_errors machineform %}
{% endif %}
{% if interfaceform %}
{% bootstrap_form_errors interfaceform %}
{% endif %}
{% if domainform %}
{% bootstrap_form_errors domainform %}
{% endif %}

<form class="form" method="post">
    {% csrf_token %}
    {% if machineform %}
    <h3>Machine</h3>
    {% bootstrap_form machineform %}
    {% endif %}
    {% if interfaceform %}
    <h3>Interface</h3>
        {% if i_bft_param %}
	    {% if 'machine' in interfaceform.fields %}
    {% bootstrap_form_typeahead interfaceform 'ipv4,machine' bft_param=i_bft_param %}
	    {% else %}
    {% bootstrap_form_typeahead interfaceform 'ipv4' bft_param=i_bft_param %}
	    {% endif %}
	{% else %}
	    {% if 'machine' in interfaceform.fields %}
    {% bootstrap_form_typeahead interfaceform 'ipv4,machine' %}
	    {% else %}
    {% bootstrap_form_typeahead interfaceform 'ipv4' %}
	    {% endif %}
	{% endif %}
    {% endif %}
    {% if domainform %}
    <h3>Domaine</h3>
    {% bootstrap_form domainform %}
    {% endif %}
    {% bootstrap_button "Créer ou modifier" button_type="submit" icon="star" %}
</form>
  <br />
  <br />
  <br />
{% endblock %}
