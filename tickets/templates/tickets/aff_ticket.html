{% extends 'users/sidebar.html' %}
{% comment %}
Re2o est un logiciel d'administration développé initiallement au rezometz. Il
se veut agnostique au réseau considéré, de manière à être installable en
quelques clics.

Copyright © 2017  Gabriel Détraz
Copyright © 2017  Lara Kermarec
Copyright © 2017  Augustin Lemesle

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License along
with this program; if not, write to the Free Software Foundation, Inc.,
51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
{% endcomment %}

{% load bootstrap3 %}
{% load i18n %}
{% load humanize %}
{% load acl %}

{% block title %}{% trans "Tickets" %}{% endblock %}

{% block content %}

<h2>{% blocktrans with id=ticket.id %}Ticket #{{id}}{% endblocktrans %} 
{% if ticket.solved %}
<span class="badge badge-success">{% trans "Solved" %}</span>
{% else %}
<span class="badge badge-danger">{% trans "Not solved" %}</span>
{% endif %}
</h2>

<div class="panel panel-default">
<div class="panel-heading">
    {% trans "Opened by" %}
    {% if ticket.user %} 
        <a href="{% url 'users:profil' ticket.user.id%}">
            {{ ticket.user.get_full_name }}
        </a>
    {% else %}
        {% trans "Anonymous user" %}
    {% endif %}
    {{ ticket.date | naturalday}}.
    {% if not ticket.user %}
    {% trans "Response address: " %}<A HREF="mailto:{{ticket.email}}?subject={% trans "Response to your ticket"%}">{{ticket.email}}</A>
    {% endif %}
</div>
<div class="panel-body">

    <p><b>{% trans "Title:" %}</b> {{ticket.title}}</p>
    <p><b>{% trans "Description:" %}</b> {{ ticket.description | linebreaks }}</p>
 
<div class="text-right">
    {% can_edit ticket %}
    <a type="button" href="{% url 'tickets:edit-ticket' ticket.id %}" class="btn btn-info"><p>{% trans "Edit this ticket" %}</p></a>
    {% if not ticket.solved %}
        <a type="button" href="{% url 'tickets:change-ticket-status' ticket.id %}" class="btn btn-success"><p>{% trans "Mark as solved" %}</p></a>
    {% else %}
        <a type="button" href="{% url 'tickets:change-ticket-status' ticket.id %}" class="btn btn-warning"><p>{% trans "Mark as unsolved" %}</p></a>
    {% endif %}
    {% acl_end %}
</div>
</div>
</div>


<div class="text-right">
    <a type="button" href="{% url 'tickets:aff-tickets' %}" class="btn btn-primary"><p>{% trans "All tickets" %}</p></a>
</div>

{% endblock %}
