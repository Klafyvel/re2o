{% extends 'users/sidebar.html' %}
{% comment %}
Re2o est un logiciel d'administration développé initiallement au Rézo Metz. Il
se veut agnostique au réseau considéré, de manière à être installable en
quelques clics.

Copyright © 2021  Jean-Romain Garnier

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License along
with this program; if not, write to the Free Software Foundation, Inc.,
51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
{% endcomment %}

{% load bootstrap3 %}
{% load i18n %}
{% load humanize %}
{% load logs_extra %}
{% load acl %}

{% block title %}{% trans "Deposits" %}{% endblock %}

{% block content %}

<h2>{% blocktrans with id=deposit.id %}Deposit #{{id}}{% endblocktrans %} 
{% if deposit.returned %}
<span class="badge badge-success">{% trans "Returned" %}</span>
{% else %}
<span class="badge badge-danger">{% trans "Not returned" %}</span>
{% endif %}
</h2>

<div class="panel panel-default">
<div class="panel-heading">
    {% trans "Lent to" %}
    <a href="{% url 'users:profil' deposit.user.id%}">
        {{ deposit.user.get_full_name }}
    </a>
    {{ deposit.date | naturalday}}.

<div class="text-right">
    {% can_edit deposit %}
    <a class="btn btn-info btn-sm" role="button" href="{% url 'deposits:edit-deposit' deposit.id %}"><i class="fa fa-edit"></i> {% trans "Edit" %}</a>
    {% if not deposit.returned %}
        <a class="btn btn-success btn-sm" role="button" href="{% url 'deposits:change-deposit-status' deposit.id %}"><i class="fa fa-check"></i> {% trans "Mark as returned" %}</a>
    {% else %}
        <a class="btn btn-warning btn-sm" role="button" href="{% url 'deposits:change-deposit-status' deposit.id %}"><i class="fa fa-close"></i> {% trans "Mark as not returned" %}</a>
    {% endif %}
    {% acl_end %}
    {% history_button deposit text=True %}
</div>
</div>
<div class="panel-body">

    <p><b>{% trans "Item:" %}</b> {{deposit.item}}</p>
 
</div>

</div>

<div class="text-right">
    <a class="btn btn-primary" role="button" href="{% url 'deposits:aff-deposits' %}"><i class="fa fa-reorder"></i> {% trans "All deposits" %}</a>
</div>

{% endblock %}
